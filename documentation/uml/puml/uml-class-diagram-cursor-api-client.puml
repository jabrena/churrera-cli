@startuml
!theme plain
title Cursor API Client Module - Class Diagram

package "info.jab.cursor.client" {
  interface CursorAgentManagement {
    + launch(String, String, String, Boolean) : AgentResponse
    + followUp(String, String) : FollowUpResponse
    + delete(String) : DeleteAgentResponse
  }

  interface CursorAgentInformation {
    + getAgents(Integer, String) : AgentsList
    + getStatus(String) : AgentResponse
    + getAgentConversation(String) : ConversationResponse
  }

  interface CursorAgentGeneralEndpoints {
    + getApiKeyInfo() : ApiKeyInfo
    + getModels() : List<String>
    + getRepositories() : List<String>
  }
}

package "info.jab.cursor.client.impl" {
  class CursorAgentManagementImpl implements CursorAgentManagement {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentManagementImpl(String, DefaultApi)
    + launch(String, String, String, Boolean) : AgentResponse
    + followUp(String, String) : FollowUpResponse
    + delete(String) : DeleteAgentResponse
  }

  class CursorAgentInformationImpl implements CursorAgentInformation {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentInformationImpl(String, DefaultApi)
    + getAgents(Integer, String) : AgentsList
    + getStatus(String) : AgentResponse
    + getAgentConversation(String) : ConversationResponse
  }

  class CursorAgentGeneralEndpointsImpl implements CursorAgentGeneralEndpoints {
    - String apiKey
    - DefaultApi defaultApi
    + CursorAgentGeneralEndpointsImpl(String, DefaultApi)
    + getApiKeyInfo() : ApiKeyInfo
    + getModels() : List<String>
    + getRepositories() : List<String>
  }
}

package "info.jab.cursor.client.model" {
  record AgentResponse {
    + String id
    + String name
    + AgentStatus status
    + Source source
    + Target target
    + OffsetDateTime createdAt
    + {static} from(CreateAgent201Response) : AgentResponse
    + {static} from(ListAgents200ResponseAgentsInner) : AgentResponse
  }

  record FollowUpResponse {
    + String id
    + String message
  }

  record DeleteAgentResponse {
    + String message
  }

  record ConversationResponse {
    + List<ConversationMessage> messages
  }

  record ConversationMessage {
    + String text
    + String role
    + OffsetDateTime timestamp
  }

  record AgentsList {
    + List<AgentResponse> agents
    + String cursor
  }

  record ApiKeyInfo {
    + String apiKey
  }

  record Source {
    + String type
    + String content
    + {static} from(ListAgents200ResponseAgentsInnerSource) : Source
  }

  record Target {
    + String type
    + String repository
    + String model
    + {static} from(ListAgents200ResponseAgentsInnerTarget) : Target
  }

  enum AgentStatus {
    CREATING
    RUNNING
    FINISHED
    ERROR
    EXPIRED
  }
}

' Relationships
CursorAgentManagementImpl ..|> CursorAgentManagement
CursorAgentInformationImpl ..|> CursorAgentInformation
CursorAgentGeneralEndpointsImpl ..|> CursorAgentGeneralEndpoints

CursorAgentManagementImpl --> AgentResponse
CursorAgentManagementImpl --> FollowUpResponse
CursorAgentManagementImpl --> DeleteAgentResponse
CursorAgentManagementImpl --> DefaultApi

CursorAgentInformationImpl --> AgentResponse
CursorAgentInformationImpl --> AgentsList
CursorAgentInformationImpl --> ConversationResponse
CursorAgentInformationImpl --> DefaultApi

CursorAgentGeneralEndpointsImpl --> ApiKeyInfo
CursorAgentGeneralEndpointsImpl --> DefaultApi

AgentResponse --> AgentStatus
AgentResponse --> Source
AgentResponse --> Target

ConversationResponse --> ConversationMessage
AgentsList --> AgentResponse

note right of CursorAgentManagement
  Interface for launching and managing agents
end note

note right of CursorAgentInformation
  Interface for querying agent information
end note

note right of CursorAgentGeneralEndpoints
  Interface for general API endpoints
end note

note right of AgentResponse
  Domain model for agent responses
  Maps from OpenAPI generated models
end note

@enduml
