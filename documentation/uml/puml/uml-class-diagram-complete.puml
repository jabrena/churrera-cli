@startuml
!theme plain
title Complete Project - Class Diagram

package "churrera-cli" {
  package "info.jab.churrera.cli" {
    class ChurreraCLI
  }
  package "info.jab.churrera.cli.command" {
    class CliCommand
    class RunCommand
    class JobsCommand
    class NewJobCommand
    class NewJobRunCommand
    class JobsPrCommand
    class JobStatusCommand
    class JobLogsCommand
    class DeleteJobCommand
    class TableFormatter
  }
  package "info.jab.churrera.cli.service" {
    class CLIAgent
    class JobProcessor
  }
  package "info.jab.churrera.cli.repository" {
    class JobRepository
  }
  package "info.jab.churrera.cli.model" {
    class Job
    class JobWithDetails
    class Prompt
    enum AgentState
  }
  package "info.jab.churrera.cli.util" {
    class GitInfo
  }
}

package "churrera-core" {
  package "info.jab.churrera.workflow" {
    class WorkflowParser
    class WorkflowData
    class WorkflowValidator
    class PmlValidator
    class WorkflowParseException
    class PromptInfo
    class ParallelWorkflowData
    class SequenceInfo
    class TimeoutParser
    class ExpressionEvaluator
    class BindResultTypeMapper
    enum WorkflowType
  }
  package "info.jab.churrera.util" {
    class PmlConverter
    class PropertyResolver
    class CursorApiKeyResolver
    class ClasspathResolver
    class ConversationJsonDeserializer
  }
}

package "cursor-cloud-agents-client" {
  package "info.jab.cursor.client" {
    interface CursorAgentManagement
    interface CursorAgentInformation
    interface CursorAgentGeneralEndpoints
  }
  package "info.jab.cursor.client.impl" {
    class CursorAgentManagementImpl
    class CursorAgentInformationImpl
    class CursorAgentGeneralEndpointsImpl
  }
  package "info.jab.cursor.client.model" {
    class AgentResponse
    class FollowUpResponse
    class DeleteAgentResponse
    class ConversationResponse
    class ConversationMessage
    class AgentsList
    class ApiKeyInfo
    class RepositoriesList
    class Repository
    class Source
    class Target
  }
}

' Cross-module relationships
ChurreraCLI --> CliCommand
ChurreraCLI --> RunCommand
CliCommand --> JobRepository
CliCommand --> JobProcessor
CliCommand --> CLIAgent
RunCommand --> JobRepository
RunCommand --> JobProcessor
RunCommand --> WorkflowValidator
RunCommand --> WorkflowParser
RunCommand --> PmlValidator
CLIAgent --> JobRepository
CLIAgent --> CursorAgentManagement
CLIAgent --> CursorAgentInformation
CLIAgent --> PmlConverter
CLIAgent --> PropertyResolver
JobProcessor --> JobRepository
JobProcessor --> CLIAgent
JobProcessor --> WorkflowParser
JobRepository --> Job
JobRepository --> Prompt
JobRepository --> JobWithDetails
Job --> AgentState
Job --> WorkflowType
JobWithDetails --> Job
JobWithDetails --> Prompt
WorkflowParser --> WorkflowData
WorkflowParser --> WorkflowType
WorkflowData --> PromptInfo
WorkflowData --> ParallelWorkflowData
WorkflowData --> WorkflowType
ParallelWorkflowData --> PromptInfo
ParallelWorkflowData --> SequenceInfo
SequenceInfo --> PromptInfo
CursorAgentManagementImpl ..|> CursorAgentManagement
CursorAgentInformationImpl ..|> CursorAgentInformation
CursorAgentGeneralEndpointsImpl ..|> CursorAgentGeneralEndpoints
CursorAgentManagementImpl --> AgentResponse
CursorAgentInformationImpl --> AgentResponse
CursorAgentInformationImpl --> ConversationResponse
ConversationResponse --> ConversationMessage

@enduml
