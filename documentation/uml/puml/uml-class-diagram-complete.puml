@startuml
!theme plain
scale 0.6
title Complete Project Overview - All Modules Class Diagram

package "churrera-cli" {
  class ChurreraCLI
  class JobProcessor
  class CLIAgent
  class JobRepository
  class RunCommand
  class CliCommand
  class SequenceWorkflowHandler
  class ParallelWorkflowHandler
  class ChildWorkflowHandler
  class Job
  class Prompt
  class AgentState
}

package "churrera-core" {
  class WorkflowParser
  class WorkflowData
  class WorkflowValidator
  class PmlValidator
  class PromptInfo
  class SequenceInfo
  class ParallelWorkflowData
  class PropertyResolver
  class CursorApiKeyResolver
  class PmlConverter
  class ExpressionEvaluator
  class WorkflowType
}

package "cursor-cloud-agents-client" {
  interface CursorAgentManagement
  interface CursorAgentInformation
  interface CursorAgentGeneralEndpoints
  class CursorAgentManagementImpl
  class CursorAgentInformationImpl
  class CursorAgentGeneralEndpointsImpl
  class AgentResponse
  class FollowUpResponse
  class ConversationResponse
  class AgentsList
  class AgentStatus
}

package "cursor-cloud-agents-openapi" {
  class OpenAPISpecification
  class DefaultApi
  class ApiClient
}

' Cross-module relationships
ChurreraCLI --> JobRepository : uses
ChurreraCLI --> CLIAgent : uses
ChurreraCLI --> JobProcessor : uses
ChurreraCLI --> WorkflowParser : uses
ChurreraCLI --> WorkflowValidator : uses
ChurreraCLI --> PmlValidator : uses
ChurreraCLI --> CursorApiKeyResolver : uses
ChurreraCLI --> PropertyResolver : uses

JobProcessor --> JobRepository : uses
JobProcessor --> CLIAgent : uses
JobProcessor --> WorkflowParser : uses
JobProcessor --> SequenceWorkflowHandler : uses
JobProcessor --> ParallelWorkflowHandler : uses
JobProcessor --> ChildWorkflowHandler : uses

CLIAgent --> JobRepository : uses
CLIAgent --> CursorAgentManagement : uses
CLIAgent --> CursorAgentInformation : uses
CLIAgent --> CursorAgentGeneralEndpoints : uses
CLIAgent --> PmlConverter : uses
CLIAgent --> ExpressionEvaluator : uses

SequenceWorkflowHandler --> CLIAgent : uses
SequenceWorkflowHandler --> JobRepository : uses

ParallelWorkflowHandler --> CLIAgent : uses
ParallelWorkflowHandler --> JobRepository : uses

ChildWorkflowHandler --> CLIAgent : uses
ChildWorkflowHandler --> JobRepository : uses

JobRepository --> Job : manages
JobRepository --> Prompt : manages

Job --> AgentState : has
Job --> WorkflowType : has

WorkflowParser --> WorkflowData : creates
WorkflowParser --> PromptInfo : creates
WorkflowParser --> SequenceInfo : creates
WorkflowParser --> ParallelWorkflowData : creates
WorkflowParser --> WorkflowType : uses

WorkflowData --> PromptInfo : contains
WorkflowData --> ParallelWorkflowData : contains
WorkflowData --> SequenceInfo : contains

ParallelWorkflowData --> SequenceInfo : contains
SequenceInfo --> PromptInfo : contains

WorkflowValidator --> WorkflowData : validates
WorkflowValidator --> SequenceInfo : validates
WorkflowValidator --> ParallelWorkflowData : validates

CursorAgentManagementImpl ..|> CursorAgentManagement : implements
CursorAgentInformationImpl ..|> CursorAgentInformation : implements
CursorAgentGeneralEndpointsImpl ..|> CursorAgentGeneralEndpoints : implements

CursorAgentManagementImpl --> DefaultApi : uses
CursorAgentInformationImpl --> DefaultApi : uses
CursorAgentGeneralEndpointsImpl --> DefaultApi : uses

CursorAgentManagement --> AgentResponse : returns
CursorAgentManagement --> FollowUpResponse : returns
CursorAgentInformation --> AgentResponse : returns
CursorAgentInformation --> ConversationResponse : returns
CursorAgentInformation --> AgentsList : returns

AgentResponse --> AgentStatus : has
FollowUpResponse --> AgentStatus : has

DefaultApi --> ApiClient : uses
OpenAPISpecification --> DefaultApi : generates

@enduml
