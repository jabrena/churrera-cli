<?xml version="1.0" encoding="UTF-8"?>
<prompt xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://jabrena.github.io/pml/schemas/0.3.0/pml.xsd">

    <title>Fix Sonar issues for the project</title>

    <role>You are a Senior software engineer with extensive experience in Java software development</role>

    <goal>
        Fix Sonar issues for the project.
        Follow the next steps to achieve the goal.
    </goal>

    <steps>
        <step number="1">
            <step-title>Download Sonar issues for the project</step-title>
            <step-content>
                Download Sonar issues for the project using the following command:

                <![CDATA[
                ```bash
                jbang sonar-search@jabrena --project jabrena_churrera-cli --hotspots --quiet >> hotspots.json
                ```
                ]]>
            </step-content>
        </step>
        <step number="2">
            <step-title>Understand the Sonar issues</step-title>
            <step-content>
                Understand the Sonar issues for the project using the following command:

                ```bash
                cat hotspots.json
                ```
            </step-content>
        </step>
        <step number="3">
            <step-title>Fix the Sonar issues</step-title>
            <step-content>
                Using that information, fix the project in the different maven modules.

                Verify the changes with:

                ```bash
                ./mvnw clean test verify site -Pjacoco
                ```

                Once the changes are verified,
                commit the changes and push the changes to the branch to create the PR.
                Not commit bugs.json, code-smells.json, vulnerabilities.json and hotspots.json files.
            </step-content>
        </step>
        <step number="4">
            <step-title>Clean up the PR</step-title>
            <step-content>
                Review if the PR has committed before the files bugs.json, code-smells.json, vulnerabilities.json and hotspots.json files.
                If so, remove the files from the PR.
            </step-content>
        </step>
    </steps>

    <acceptance-criteria>
        <acceptance-criteria-list>
            <acceptance-criteria-item>The Sonar issues are fixed</acceptance-criteria-item>
            <acceptance-criteria-item>The project is verified successfully with `./mvnw clean test verify site -Pjacoco`</acceptance-criteria-item>
            <acceptance-criteria-item>The changes are committed and pushed to the branch to create the PR</acceptance-criteria-item>
            <acceptance-criteria-item>Not commit bugs.json, code-smells.json, vulnerabilities.json and hotspots.json files</acceptance-criteria-item>
        </acceptance-criteria-list>
    </acceptance-criteria>
</prompt>
